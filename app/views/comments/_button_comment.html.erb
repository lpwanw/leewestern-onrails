<% if current_user.present? %>
  <%= link_to new_comment_comment_path(commentable),
              data: {
                turbo_frame: :modal,
              },
              class: "cursor-pointer flex justify-center items-center gap-0.5 p-2 active:scale-90 rounded-full hover:bg-gray-200" do %>
    <svg class="size-5 text-gray-800 dark:text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="matrix(-1, 0, 0, 1, 0, 0)">
      <g id="SVGRepo_iconCarrier">
        <g clip-path="url(#clip0_429_11233)">
          <path d="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 13.4876 3.36093 14.891 4 16.1272L3 21L7.8728 20C9.10904 20.6391 10.5124 21 12 21Z" stroke="#292929" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </g>
        <defs>
          <clipPath id="clip0_429_11233">
            <rect width="24" height="24" fill="white"></rect>
          </clipPath>
        </defs>
      </g>
    </svg>

    <% comment_count = commentable.comments_count %>

    <span class="<%= "hidden" if comment_count <= 0 %> text-sm">
      <%= comment_count if comment_count.positive? %>
    </span>
  <% end %>
<% else %>
  <%= link_to new_user_session_path,
              data: {
                tooltip_target: dom_id(commentable, :comment_button_tooltip),
              },
              class: "cursor-pointer flex justify-center items-center gap-0.5 p-2 active:scale-90 rounded-full hover:bg-gray-200" do %>
    <svg class="size-5 text-gray-800 dark:text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="matrix(-1, 0, 0, 1, 0, 0)">
      <g id="SVGRepo_iconCarrier">
        <g clip-path="url(#clip0_429_11233)">
          <path d="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 13.4876 3.36093 14.891 4 16.1272L3 21L7.8728 20C9.10904 20.6391 10.5124 21 12 21Z" stroke="#292929" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </g>
        <defs>
          <clipPath id="clip0_429_11233">
            <rect width="24" height="24" fill="white"></rect>
          </clipPath>
        </defs>
      </g>
    </svg>

    <% comment_count = commentable.comments_count %>

    <span class="<%= "hidden" if comment_count <= 0 %> text-sm">
      <%= comment_count if comment_count.positive? %>
    </span>
  <% end %>

  <div id="<%= dom_id(commentable, :comment_button_tooltip) %>" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700">
    Log in to comment
    <div class="tooltip-arrow" data-popper-arrow></div>
  </div>
<% end %>
